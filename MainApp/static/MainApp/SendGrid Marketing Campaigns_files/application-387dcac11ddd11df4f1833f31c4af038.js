(function(){}).call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Nlvx.AbWinnerSelectModal=function(){function e(e){this.submitSaveForm=t(this.submitSaveForm,this),this.$target=$(e)}var s;return e.prototype.bindEvents=function(){return $(".winner-select").on("click",s),this.$target.on("click","#selectwinner_modal .confirm",function(t){return function(){return t.submitSaveForm()}}(this))},s=function(){return $("#selectwinner_modal").modal({show:!0,backdrop:!1})},e.prototype.submitSaveForm=function(){return this.$target.find("form.edit_content").submit()},e}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Nlvx.AbTest=function(){function e(e,s,i){this.updateTabs=t(this.updateTabs,this),this.setVersions=t(this.setVersions,this),this.getVersions=t(this.getVersions,this),this.submitSaveForm=t(this.submitSaveForm,this),this.updateDurationSelect=t(this.updateDurationSelect,this),this.outputUpdate=t(this.outputUpdate,this),this.showSubjectsMenu=t(this.showSubjectsMenu,this),this.hideSubjectsMenu=t(this.hideSubjectsMenu,this),this.showSubjects=t(this.showSubjects,this),this.activateAbTest=t(this.activateAbTest,this),this.hideContentTabs=t(this.hideContentTabs,this),this.changeImportTextForSubjectLine=t(this.changeImportTextForSubjectLine,this),this.changeImportTextForEmailContent=t(this.changeImportTextForEmailContent,this),this.enableSubjectInput=t(this.enableSubjectInput,this),this.disableSubjectInput=t(this.disableSubjectInput,this),this.hideTabsIfSubjectLineChecked=t(this.hideTabsIfSubjectLineChecked,this);var n;this.campaignId=s,this.$target=$(e),this.$version_select=this.$target.find("#versions_select"),this.$active_checkbox=this.$target.find('[name="campaign[campaign_ab_test][active]"]'),this.$ab_trigger_input=this.$target.find("#ab-trigger"),this.$percentageInput=this.$target.find("#percentage"),this.$durationSelect=this.$target.find("#duration_select"),this.$abTestId=this.$target.find('[name="campaign[campaign_ab_test][id]"]').val(),this.$showIfTypeSel=$(".show-if-type-selected"),n=$("#campaign-ab-testing .accordion-panel"),this.$collapsibleContainer=n.find(".collapsible"),this.versions=0,this.splits=0,this.subjectClasses=[".a-label",".b-label",".c-label",".d-label",".e-label",".f-label"],this.splitIds=["#split-a","#split-b","#split-c","#split-d","#split-e","#split-f"],this.percentageIds=["#a-percentage","#b-percentage","#c-percentage","#d-percentage","#e-percentage","#f-percentage"],this.versionTexts=["One","Two","Three","Four","Five","Six"],this.$subjectInput=$("#campaign-sending #campaign_campaign_content_subject"),this.$abTestBadge=$("#ab-test-badge"),this.$importFromHTMLButton=$("button#import_from_html"),this.$designModeBtn=$(".design-mode"),this.$codeModeBtn=$(".code-mode"),this.outputUpdate(),this.updateDurationSelect(),this.getVersions(),this.$emailSubject=this.$target.find("#email-subject"),this.$emailSubjectFields=this.$target.find(".ab-subject-fields"),this.$emailContentRadioButton=$(this.$target.find('#ab-variation-types label:contains("Email Content")').siblings()[0]),this.$subjectLineRadioButton=$(this.$target.find('#ab-variation-types label:contains("Subject Line")').siblings()[0]),$("[name='campaign[campaign_content][subject]']").on("keyup",function(){return $("[name='campaign[campaign_content][subject]']").not(":focus").val($(this).val())}),$("[name='campaign[campaign_content][subject]']").on("change",function(){return $("[name='campaign[campaign_content][subject]']").not(":focus").val($(this).val())}),this.$subjectLineRadioButton.prop("checked")===!1&&abContentEnabled&&this.hideSubjectsMenu(),this.$emailContentRadioButton.prop("checked")!==!1&&abContentEnabled||this.hideContentTabs(),this.$subjectLineRadioButton.prop("checked")?($("body").removeClass("has-content-ab-test"),this.disableSubjectInput(),this.changeImportTextForSubjectLine()):this.$emailContentRadioButton.prop("checked")&&($("body").addClass("has-content-ab-test"),this.changeImportTextForEmailContent()),this.router=i,this.activateAbTest()}var s;return e.prototype.bindEvents=function(){return this.$version_select.on("change",this.showSubjects),this.activateSwitch=new Nlvx.OnOffSwitch(this.$ab_trigger_input),$(this.activateSwitch).on({off:function(t){return function(){return t.activateAbTest()}}(this),on:function(t){return function(){return t.activateAbTest()}}(this)}),this.$percentageInput.on("input",this.outputUpdate),this.$emailContentRadioButton.on("change",function(t){return function(){return $("body").addClass("has-content-ab-test"),t.hideSubjectsMenu(),t.enableSubjectInput(),t.changeImportTextForEmailContent(),t.$showIfTypeSel.show()}}(this)),this.$subjectLineRadioButton.on("change",function(t){return function(){return $("body").removeClass("has-content-ab-test"),t.showSubjectsMenu(),t.hideContentTabs(),t.disableSubjectInput(),t.changeImportTextForSubjectLine(),t.$showIfTypeSel.show(),Nlvx.ContentEditor.contentCollection.removeContentsExceptA()}}(this)),this.$abTestBadge.on("click",function(){return $("a[href=#campaign-ab-testing]").click()}),this.$designModeBtn.on("click",this.hideTabsIfSubjectLineChecked),this.$codeModeBtn.on("click",this.hideTabsIfSubjectLineChecked),$(".winner-select").on("click",s),this.$target.on("click","#selectwinner_modal .confirm",function(t){return function(){return t.submitSaveForm()}}(this)),this.$emailContentRadioButton.prop("checked")===!0&&this.hideSubjectsMenu,this.$emailContentRadioButton.bind("click",this.updateTabs),this.$version_select.bind("change",this.updateTabs)},e.prototype.hideTabsIfSubjectLineChecked=function(){return this.$subjectLineRadioButton.prop("checked")===!0?Nlvx.ContentEditor.contentCollection.removeContentsExceptA():void 0},e.prototype.disableSubjectInput=function(){return this.$subjectInput.prop("disabled",!0),this.$abTestBadge.show()},e.prototype.enableSubjectInput=function(){return this.$subjectInput.prop("disabled",!1),this.$abTestBadge.hide()},e.prototype.changeImportTextForEmailContent=function(){return this.$importFromHTMLButton.text("Import for all versions")},e.prototype.changeImportTextForSubjectLine=function(){return this.$importFromHTMLButton.text("Import From HTML")},e.prototype.hideContentTabs=function(){return this.$contentTabs=$("ul.contentabtest--tabs"),this.$contentTabs.hide()},e.prototype.activateAbTest=function(){var t,e;return this.$active_checkbox.is(":checked")?(this.$collapsibleContainer.slideDown(300),t=this.$emailContentRadioButton.is(":checked"),e=this.$subjectLineRadioButton.is(":checked"),t===!1&&e===!1&&this.$showIfTypeSel.hide(),this.getVersions(),t&&$("body").addClass("has-content-ab-test"),e&&this.disableSubjectInput()):(this.$collapsibleContainer.slideUp(300),$("body").removeClass("has-content-ab-test"),this.$showIfTypeSel.show(),this.enableSubjectInput(),Nlvx.ContentEditor.contentCollection.removeContentsExceptA(),this.hideContentTabs(),this.$version_select.select2("val",1),this.router.switchToVersion(null)),t===!0?(this.hideSubjectsMenu(),this.updateTabs()):void 0},e.prototype.showSubjects=function(){var t,e,s,i,n;for(this.versions=parseInt(this.$version_select.select2("val")),$("#versions-text").text(this.versionTexts[this.versions-1]),t=e=0,i=this.versions;i>=0?i>=e:e>=i;t=i>=0?++e:--e)$(this.subjectClasses[t]).show(),$(this.splitIds[t]).show();for(t=s=n=this.versions;6>=n?6>=s:s>=6;t=6>=n?++s:--s)$(this.subjectClasses[t]).hide(),$(this.splitIds[t]).hide();return this.outputUpdate()},e.prototype.hideSubjectsMenu=function(){return this.$emailSubject.hide(),this.$emailSubjectFields.hide()},e.prototype.showSubjectsMenu=function(){return this.$emailSubject.show(),this.$emailSubjectFields.show()},e.prototype.outputUpdate=function(){var t,e,s,i,n,a;for(i=this.$percentageInput.val(),e=i/this.versions,s=e.toFixed(2),this.$target.find("#volume").text(i+"%"),t=n=0,a=this.versions;a>=0?a>=n:n>=a;t=a>=0?++n:--n)this.$target.find(this.percentageIds[t]).text(s+"%");this.$target.find("#winning_percentage").text(100-i+"%")},e.prototype.updateDurationSelect=function(){var t;this.$abTestId&&(t=this.$durationSelect.attr("value"),this.$durationSelect.select2("val",t),this.$active_checkbox.prop("checked",!0))},s=function(){return $("#selectwinner_modal").modal({show:!0,backdrop:!1})},e.prototype.submitSaveForm=function(){return this.$target.find("form.edit_content").submit()},e.prototype.getVersions=function(){return 0===this.splits&&(this.splits=_.size(Nlvx.ContentEditor.contentCollection.getContents())),this.setVersions()},e.prototype.setVersions=function(){return this.versions=this.splits,1===this.versions&&(this.versions=2),this.$version_select.select2("val",this.versions),this.showSubjects()},e.prototype.updateTabs=function(){return this.$emailContentRadioButton.is(":checked")&&abContentEnabled?(Nlvx.ContentEditor.contentCollection.setVersionCount(parseInt(this.$version_select.select2("val"))),this.router.switchToVersion("a")):void 0},e}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Nlvx.CampaignActionsDropdown=function(){function e(e,s,i){this.handleUnscheduleCampaign=t(this.handleUnscheduleCampaign,this),this.handleTemplatizeCampaign=t(this.handleTemplatizeCampaign,this),this.handleDuplicateCampaign=t(this.handleDuplicateCampaign,this),this.handleRenderPreviewModal=t(this.handleRenderPreviewModal,this),this.handleRenderDeleteModal=t(this.handleRenderDeleteModal,this),this.$target=$(e),this.$deleteModal=s,this.$previewModal=i}return e.prototype.duplicateCampaign=function(t){return $("form.duplicate_form[data-id="+t+"]").submit()},e.prototype.templatizeCampaign=function(t){var e;return e=function(){return $("form.templatize_form[data-id="+t+"]").submit()},window.analytics.track("template_created",{source:"from_campaign"},e)},e.prototype.unscheduleCampaign=function(t){return $("form.unschedule_form[data-id="+t+"]").submit()},e.prototype.renderDeleteModal=function(t){return this.$deleteModal.render(t)},e.prototype.renderPreviewModal=function(t){return this.$previewModal.render(t)},e.prototype.bindEvents=function(){return this.$target.find('[data-action="delete"]').click(this.handleRenderDeleteModal),this.$target.find('[data-action="preview"]').click(this.handleRenderPreviewModal),this.$target.find('[data-action="duplicate"]').click(this.handleDuplicateCampaign),this.$target.find('[data-action="templatize"]').click(this.handleTemplatizeCampaign),this.$target.find('[data-action="unschedule"]').click(this.handleUnscheduleCampaign)},e.prototype.handleRenderDeleteModal=function(t){var e;return t.preventDefault(),e=$(t.currentTarget).data("id"),this.renderDeleteModal(e)},e.prototype.handleRenderPreviewModal=function(t){var e;return t.preventDefault(),e=$(t.currentTarget).data("path"),this.renderPreviewModal(e)},e.prototype.handleDuplicateCampaign=function(t){var e;return t.preventDefault(),e=$(t.currentTarget).data("id"),this.duplicateCampaign(e)},e.prototype.handleTemplatizeCampaign=function(t){var e;return t.preventDefault(),e=$(t.currentTarget).data("id"),this.templatizeCampaign(e)},e.prototype.handleUnscheduleCampaign=function(t){var e;return t.preventDefault(),e=$(t.currentTarget).data("id"),this.unscheduleCampaign(e)},e}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Nlvx.CampaignCreate=function(){function e(e){this.selectTemplate=t(this.selectTemplate,this),this.clearForm=t(this.clearForm,this),this.setFocus=t(this.setFocus,this),this.handleSubmit=t(this.handleSubmit,this),this.$target=$(e),this.$form=this.$target.find("form#new_campaign"),this.$campaign_name=this.$target.find("input#campaign_name"),this.$template_id_input=this.$target.find('input[name="campaign[template_id]"]'),this.$content_created_via_input=this.$target.find('input[name="campaign[content_source]"]')}return e.prototype.bindEvents=function(){return this.$form.on("submit",this.handleSubmit),this.$target.on("click","img.template-image",this.selectTemplate),this.$target.on("shown.bs.modal",this.setFocus),this.$target.on("hidden.bs.modal",this.clearForm)},e.prototype.handleSubmit=function(t){return t.preventDefault(),""===this.$campaign_name.val()?(this.$campaign_name.addClass("error"),this.$campaign_name.focus()):this.templatesAreInvalid()||this.customHtmlIsInvalid()?Nlvx.FlashMessageHandler.add("danger","Please choose a template or enter custom html."):this.usingTemplateSelectForm()?this.submitForm():(this.updateContentSource("import"),this.submitForm())},e.prototype.setFocus=function(){return this.$campaign_name.focus()},e.prototype.clearForm=function(){return this.$campaign_name.val("").removeClass("error"),$("#campaign_content").val(""),$(".template-image").removeClass("selected-template"),this.$template_id_input.val(""),this.$form.validateForm("check")},e.prototype.submitForm=function(){return this.$form.unbind("submit"),this.$form.submit()},e.prototype.updateContentSource=function(t){return this.$content_created_via_input.val(t)},e.prototype.selectTemplate=function(t){var e;return e=$(t.currentTarget).data("template"),this.$template_id_input.val(e),$(".template-image").removeClass("selected-template"),$("#template_image_"+e).addClass("selected-template")},e.prototype.usingTemplateSelectForm=function(){return this.$target.find(".template-selection").hasClass("active")},e.prototype.templatesAreInvalid=function(){return this.usingTemplateSelectForm()&&""===this.$template_id_input.val()},e.prototype.customHtmlIsInvalid=function(){return!this.usingTemplateSelectForm()&&""===this.$target.find("textarea[name='campaign[content]']").val()},e}()}.call(this),function(){$(document).ready(function(){var t,e,s;return t=$("#send-now-container"),e=$("#send-now-trigger"),s=new Nlvx.OnOffSwitch(e),e.is(":checked")||t.slideDown(0),$(s).on({on:function(){return t.slideUp(300),t.find("input[type='text']").val("").trigger("blur")},off:function(){return t.slideDown(300)}})})}.call(this),function(){Nlvx.CampaignStatsToggle=function(){function t(t,e){this.$buttonGroup=t,this.$table=e,this.$rawButton=this.$buttonGroup.find("[data-toggle=raw-stats]"),this.$percentageButton=this.$buttonGroup.find("[data-toggle=percentage-stats]"),this.bindEvents(),this.initializeBarChart(),this.showBarChart()}return t.prototype.bindEvents=function(){return this.$buttonGroup.on("click",".btn",function(t){return function(e){var s;return t.$buttonGroup.find(".btn").removeClass("active"),s=$(e.currentTarget),s.addClass("active")}}(this)),this.$rawButton.on("click",function(t){return function(){return t.hideBarChart()}}(this)),this.$percentageButton.on("click",function(t){return function(){return t.showBarChart()}}(this))},t.prototype.initializeBarChart=function(){var t;return t=this.$table.find(".stat"),_.each(t,function(t){return function(e){return t.setStatBarWidth(e)}}(this))},t.prototype.setStatBarWidth=function(t,e){var s,i;return i=parseFloat(e?e:$(t).attr("data-value-percentage")),3>i&&(s="3%"),$(t).find(".stat-bar").css({width:s?s:i+"%"})},t.prototype.showBarChart=function(){return this.$table.removeClass("raw-stats").addClass("percentage-stats")},t.prototype.hideBarChart=function(){return this.$table.removeClass("percentage-stats").addClass("raw-stats")},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Nlvx.CampaignStatusControls=function(){function e(e,s,i){this._togglePlayPause=t(this._togglePlayPause,this),this._handlePlayPauseClick=t(this._handlePlayPauseClick,this),this._handleCancelConfirmClick=t(this._handleCancelConfirmClick,this),this._handleCancelClick=t(this._handleCancelClick,this),this.$el=$(e),this.$campaignsPath=i,this.$cancelModal=s}return e.prototype.bindEvents=function(){return $("span.blue + span, span.red + span",this.$el).click(this._handlePlayPauseClick),$("span.cancel-button",this.$el).click(this._handleCancelClick),$(".cancel-modal .btn-primary",this.$el).click(this._handleCancelConfirmClick)},e.prototype._handleCancelClick=function(t){var e,s;return e=$(t.currentTarget),s=e.data("campaign-id"),this.$cancelModal.render(s)},e.prototype._handleCancelConfirmClick=function(t){var e,s;return e=$(t.currentTarget).parents(".cancel-modal"),s=e.data("id"),this._isCampaignCancelable(s,function(t){return function(){return t._cancelCampaign(s)}}(this))},e.prototype._cancelCampaign=function(t){return $.ajax({method:"PUT",url:this.$campaignsPath+"/"+t+"/cancel",success:this._updateUIForCancel(t)})},e.prototype._isCampaignCancelable=function(t,e){return $.ajax({method:"GET",url:this.$campaignsPath+"/"+t+"/cancel",success:function(t){return t.cancelable?e():Nlvx.FlashMessageHandler.add("danger","Unfortunately your campaign has already been sent and cannot be canceled.")}})},e.prototype._updateUIForCancel=function(t){return this.$cancelButton=this.$el.find(".cancel-button[data-campaign-id='"+t+"']"),this.$pauseButton=this.$el.find("[data-campaign-id='"+t+"'] div.pause"),this.$pickWinnerBadge=this.$el.find(".red-orange[data-campaign-id='"+t+"']"),this.$statusSpan=this.$cancelButton.siblings().first(),this.$statusSpan.removeClass("blue").addClass("red").text("CANCELED"),this.$statusSpan.css("margin-right","10px"),this.$pauseButton.remove(),this.$cancelButton.remove(),this.$pickWinnerBadge.remove()},e.prototype._handlePlayPauseClick=function(t){var e,s;return e=$(t.currentTarget),s=e.data("campaign-id"),this._togglePlayPause(e,s)},e.prototype._togglePlayPause=function(t,e){return this.$button=t.find("div"),this.$statusSpan=t.siblings().first(),this.$button.hasClass("pause")?this._pauseCampaign(e,function(t){return function(){return t.$button.removeClass("pause").addClass("play"),t.$statusSpan.removeClass("blue").addClass("red").text("PAUSED")}}(this)):this.$button.hasClass("play")?this._resumeCampaign(e,function(t){return function(){return t.$button.removeClass("play").addClass("pause"),t.$statusSpan.removeClass("red").addClass("blue").text("IN PROGRESS")}}(this)):void 0},e.prototype._pauseCampaign=function(t,e){return $.ajax({method:"PUT",url:this.$campaignsPath+"/"+t+"/pause",success:e})},e.prototype._resumeCampaign=function(t,e){return $.ajax({method:"PUT",url:this.$campaignsPath+"/"+t+"/resume",success:e})},e}()}.call(this),function(){Nlvx.CancelModal=function(){function t(t){e=$(t)}var e;return e=null,t.prototype.render=function(t){return $(".modal").modal("hide"),e.find(".cancel-modal[data-id='"+t+"']").modal({show:!0,backdrop:"static"}),$(".modal-backdrop").remove()},t}()}.call(this),function(){Nlvx.DeleteModal=function(){function t(t){e=$(t)}var e;return e=null,t.prototype.render=function(t){return $(".modal").modal("hide"),e.find(".delete-modal[data-id='"+t+"']").modal({show:!0,backdrop:"static"}),$(".modal-backdrop").remove()},t}()}.call(this),function(){var t;t=window.jQuery||window.Zepto||window.$,t.fn.fancySelect=function(e){var s,i;return null==e&&(e={}),i=t.extend({forceiOS:!1,includeBlank:!1},e),s=!!navigator.userAgent.match(/iP(hone|od|ad)/i),this.each(function(){var e,n,a,o,r,c,l;return o=t(this),o.hasClass("fancified")||"SELECT"!==o[0].tagName?void 0:(o.addClass("fancified"),o.css({width:1,height:1,display:"block",position:"absolute",top:0,left:0,opacity:0}),o.wrap('<div class="fancy-select">'),l=o.parent(),o.data("class")&&l.addClass(o.data("class")),l.append('<div class="trigger">'),(!s||i.forceiOS)&&l.append('<ul class="options">'),r=l.find(".trigger"),a=l.find(".options"),n=o.prop("disabled"),n&&l.addClass("disabled"),c=function(){return r.html("Select Sender"===o.find(":selected").text()?"<span>"+o.find(":selected").text()+"</span>":"<span class='select-pill'>"+o.find(":selected").text()+" <i class='icon-close-circle'></i></span>")},o.on("blur",function(){return r.hasClass("open")?setTimeout(function(){return r.trigger("close")},120):void 0}),r.on("close",function(){return r.removeClass("open"),a.removeClass("open")}),r.on("click",function(){var e,c;if(!n)if(r.toggleClass("open"),s&&!i.forceiOS){if(r.hasClass("open"))return o.focus()}else if(r.hasClass("open")&&(c=r.parent(),e=c.offsetParent(),c.offset().top+c.outerHeight()+a.outerHeight()+20>t(window).height()+t(window).scrollTop()?a.addClass("overflowing"):a.removeClass("overflowing")),a.toggleClass("open"),!s)return o.focus()}),o.on("enable",function(){return o.prop("disabled",!1),l.removeClass("disabled"),n=!1,e()}),o.on("disable",function(){return o.prop("disabled",!0),l.addClass("disabled"),n=!0}),o.on("change",function(t){return t.originalEvent&&t.originalEvent.isTrusted?t.stopPropagation():c()}),o.on("keydown",function(t){var e,s,i;if(i=t.which,e=a.find(".hover"),e.removeClass("hover"),a.hasClass("open")){if(38===i?(t.preventDefault(),e.length&&e.index()>0?e.prev().addClass("hover"):a.find("li:last-child").addClass("hover")):40===i?(t.preventDefault(),e.length&&e.index()<a.find("li").length-1?e.next().addClass("hover"):a.find("li:first-child").addClass("hover")):27===i?(t.preventDefault(),r.trigger("click")):13===i||32===i?(t.preventDefault(),e.trigger("click")):9===i&&r.hasClass("open")&&r.trigger("close"),s=a.find(".hover"),s.length)return a.scrollTop(0),a.scrollTop(s.position().top-12)}else if(13===i||32===i||38===i||40===i)return t.preventDefault(),r.trigger("click")}),a.on("click","li",function(e){return o.val(t(this).data("value")),s||o.trigger("blur").trigger("focus"),a.find(".selected").removeClass("selected"),t(e.currentTarget).addClass("selected"),o.val(t(this).data("value")).trigger("change").trigger("blur").trigger("focus")}),a.on("mouseenter","li",function(){var e,s;return s=t(this),e=a.find(".hover"),e.removeClass("hover"),s.addClass("hover")}),a.on("mouseleave","li",function(){return a.find(".hover").removeClass("hover")}),e=function(){var e;return c(),!s||i.forceiOS?(e=o.find("option"),o.find("option").each(function(e,s){return s=t(s),s.prop("disabled")||!s.val()&&!i.includeBlank?void 0:a.append(s.prop("selected")?'<li data-value="'+s.val()+'" class="selected">'+s.text()+" </li>":'<li data-value="'+s.val()+'">'+s.text()+" </li>")})):void 0},o.on("update",function(){return l.find(".options").empty(),e()}),e())})}}.call(this),function(){var t={}.hasOwnProperty,e=function(e,s){function i(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return i.prototype=s.prototype,e.prototype=new i,e.__super__=s.prototype,e};Nlvx.HtmlModeToggleModal=function(t){function s(t,e,i,n,a,o){s.__super__.constructor.call(this,t,e,i,n,a,o)}return e(s,t),s.prototype.onTrigger=function(t){return t.preventDefault(),$(this.$trigger).not(".active").length?this.show():void 0},s}(Nlvx.BaseModal)}.call(this),function(){Nlvx.LinkStatsChart=function(){function t(t,e){this.$container=t,this.pageSize=e,this.template=Handlebars.compile(s),this.statDisplayType="raw"}var e,s;return t.prototype.setPage=function(t,e){return this.fadeOut(),this.pageNum=t,this.$container.html(this.getHTML(e)),this.fadeIn()},t.prototype.getHTML=function(t){return this.template({items:t.slice((this.pageNum-1)*this.pageSize,this.pageNum*this.pageSize),firstIndex:(this.pageNum-1)*this.pageSize+1,totalClicks:t.reduce(function(t,e){return t+e.clicks},0),statDisplayClass:this.statDisplayType+"-stat"})},t.prototype.setEmptyChart=function(){return this.fadeOut(),this.$container.html(e),this.fadeIn()},t.prototype.showStatsAs=function(t){return this.statDisplayType=t,this.$container.find("table").removeClass("raw-stat percentage-stat").addClass(t+"-stat")},t.prototype.fadeOut=function(){return this.$container.find(".links-stat-data-item").removeClass("in")},t.prototype.fadeIn=function(){return window.getComputedStyle(this.$container[0]).opacity,this.$container.find(".links-stat-data-item").addClass("in")},Handlebars.registerHelper("increment",function(t,e){return parseInt(t)+e}),Handlebars.registerHelper("toInt",function(t){return parseInt(t)}),Handlebars.registerHelper("toPercentage",function(t,e){return""+(100*t/e).toFixed(2)+"%"}),s='<div>\n  <table class="table-striped links-summary-table {{statDisplayClass}}">\n    <thead>\n      <tr>\n        <th class="no-border shrink-to-fit">rank</th>\n        <th class="thick-left">link (url)</th>\n        <th class="thick-right">total clicks</th>\n      </tr>\n    </thead>\n    <tbody>\n      {{#each items}}\n        <tr>\n          <td class="no-border label-names links-stat-badge links-stat-data-item">\n            <span class="percentage-display-table badges gray">{{increment @index ../firstIndex}}</span>\n          </td>\n          <td class="thick-left links-stat-url links-stat-data-item">\n            <a href="{{this.url}}">{{this.url}}</a>\n          </td>\n          <td class="stat thick-right links-stat-value links-stat-data-item"\n              data-value-raw="{{toInt this.clicks}}"\n              data-value-percentage="{{toPercentage this.clicks ../totalClicks}}">\n          </td>\n        </tr>\n      {{/each}}\n      <tr>\n        <td class="no-border"></td>\n        <td class="semibold thick-left">TOTAL</td>\n        <td class="stat thick-right links-stat-value">{{toInt totalClicks}}</td>\n      </tr>\n    </tbody>\n  </table>\n</div>',e="<div>There are no stats for this tab currently.</div>",t}()}.call(this),function(t){"undefined"==typeof t.fn.each2&&t.extend(t.fn,{each2:function(e){for(var s=t([0]),i=-1,n=this.length;++i<n&&(s.context=s[0]=this[i])&&e.call(s[0],i,s)!==!1;);return this}})}(jQuery),function(t,e){"use strict";function s(e){var s=t(document.createTextNode(""));e.before(s),s.before(e),s.remove()}function i(t){function e(t){return N[t]||t}return t.replace(/[^\u0000-\u007E]/g,e)}function n(t,e){for(var s=0,i=e.length;i>s;s+=1)if(o(t,e[s]))return s;return-1}function a(){var e=t(H);e.appendTo(document.body);var s={width:e.width()-e[0].clientWidth,height:e.height()-e[0].clientHeight};return e.remove(),s}function o(t,s){return t===s?!0:t===e||s===e?!1:null===t||null===s?!1:t.constructor===String?t+""==s+"":s.constructor===String?s+""==t+"":!1}function r(t,e,s){var i,n,a;if(null===t||t.length<1)return[];for(i=t.split(e),n=0,a=i.length;a>n;n+=1)i[n]=s(i[n]);return i}function c(t){return t.outerWidth(!1)-t.width()}function l(s){var i="keyup-change-value";s.on("keydown",function(){t.data(s,i)===e&&t.data(s,i,s.val())}),s.on("keyup",function(){var n=t.data(s,i);n!==e&&s.val()!==n&&(t.removeData(s,i),s.trigger("keyup-change"))})}function h(s){s.on("mousemove",function(s){var i=F;(i===e||i.x!==s.pageX||i.y!==s.pageY)&&t(s.target).trigger("mousemove-filtered",s)})}function u(t,s,i){i=i||e;var n;return function(){var e=arguments;window.clearTimeout(n),n=window.setTimeout(function(){s.apply(i,e)},t)}}function d(t,e){var s=u(t,function(t){e.trigger("scroll-debounced",t)});e.on("scroll",function(t){n(t.target,e.get())>=0&&s(t)})}function p(t){t[0]!==document.activeElement&&window.setTimeout(function(){var e,s=t[0],i=t.val().length;t.focus();var n=s.offsetWidth>0||s.offsetHeight>0;n&&s===document.activeElement&&(s.setSelectionRange?s.setSelectionRange(i,i):s.createTextRange&&(e=s.createTextRange(),e.collapse(!1),e.select()))},0)}function f(e){e=t(e)[0];var s=0,i=0;if("selectionStart"in e)s=e.selectionStart,i=e.selectionEnd-s;else if("selection"in document){e.focus();var n=document.selection.createRange();i=document.selection.createRange().text.length,n.moveStart("character",-e.value.length),s=n.text.length-i}return{offset:s,length:i}}function m(t){t.preventDefault(),t.stopPropagation()}function g(t){t.preventDefault(),t.stopImmediatePropagation()}function v(e){if(!D){var s=e[0].currentStyle||window.getComputedStyle(e[0],null);D=t(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:s.fontSize,fontFamily:s.fontFamily,fontStyle:s.fontStyle,fontWeight:s.fontWeight,letterSpacing:s.letterSpacing,textTransform:s.textTransform,whiteSpace:"nowrap"}),D.attr("class","select2-sizer"),t(document.body).append(D)}return D.text(e.val()),D.width()}function b(e,s,i){var n,a,o=[];n=t.trim(e.attr("class")),n&&(n=""+n,t(n.split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&o.push(this)})),n=t.trim(s.attr("class")),n&&(n=""+n,t(n.split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(a=i(this),a&&o.push(a))})),e.attr("class",o.join(" "))}function C(t,e,s,n){var a=i(t.toUpperCase()).indexOf(i(e.toUpperCase())),o=e.length;return 0>a?void s.push(n(t)):(s.push(n(t.substring(0,a))),s.push("<span class='select2-match'>"),s.push(n(t.substring(a,a+o))),s.push("</span>"),void s.push(n(t.substring(a+o,t.length))))}function w(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(t).replace(/[&<>"'\/\\]/g,function(t){return e[t]})}function S(s){var i,n=null,a=s.quietMillis||100,o=s.url,r=this;return function(c){window.clearTimeout(i),i=window.setTimeout(function(){var i=s.data,a=o,l=s.transport||t.fn.select2.ajaxDefaults.transport,h={type:s.type||"GET",cache:s.cache||!1,jsonpCallback:s.jsonpCallback||e,dataType:s.dataType||"json"},u=t.extend({},t.fn.select2.ajaxDefaults.params,h);i=i?i.call(r,c.term,c.page,c.context):null,a="function"==typeof a?a.call(r,c.term,c.page,c.context):a,n&&"function"==typeof n.abort&&n.abort(),s.params&&(t.isFunction(s.params)?t.extend(u,s.params.call(r)):t.extend(u,s.params)),t.extend(u,{url:a,dataType:s.dataType,data:i,success:function(t){var e=s.results(t,c.page,c);c.callback(e)},error:function(t,e,s){var i={hasError:!0,jqXHR:t,textStatus:e,errorThrown:s};c.callback(i)}}),n=l.call(r,u)},a)}}function y(e){var s,i,n=e,a=function(t){return""+t.text};t.isArray(n)&&(i=n,n={results:i}),t.isFunction(n)===!1&&(i=n,n=function(){return i});var o=n();return o.text&&(a=o.text,t.isFunction(a)||(s=o.text,a=function(t){return t[s]})),function(e){var s,i=e.term,o={results:[]};return""===i?void e.callback(n()):(s=function(n,o){var r,c;if(n=n[0],n.children){r={};for(c in n)n.hasOwnProperty(c)&&(r[c]=n[c]);r.children=[],t(n.children).each2(function(t,e){s(e,r.children)}),(r.children.length||e.matcher(i,a(r),n))&&o.push(r)}else e.matcher(i,a(n),n)&&o.push(n)},t(n().results).each2(function(t,e){s(e,o.results)}),void e.callback(o))}}function $(s){var i=t.isFunction(s);return function(n){var a=n.term,o={results:[]},r=i?s(n):s;t.isArray(r)&&(t(r).each(function(){var t=this.text!==e,s=t?this.text:this;(""===a||n.matcher(a,s))&&o.results.push(t?this:{id:this,text:this})}),n.callback(o))}}function T(e,s){if(t.isFunction(e))return!0;if(!e)return!1;if("string"==typeof e)return!0;throw new Error(s+" must be a string, function, or falsy value")}function x(e,s){if(t.isFunction(e)){var i=Array.prototype.slice.call(arguments,2);return e.apply(s,i)}return e}function E(e){var s=0;return t.each(e,function(t,e){e.children?s+=E(e.children):s++}),s}function k(t,s,i,n){var a,r,c,l,h,u=t,d=!1;if(!n.createSearchChoice||!n.tokenSeparators||n.tokenSeparators.length<1)return e;for(;;){for(r=-1,c=0,l=n.tokenSeparators.length;l>c&&(h=n.tokenSeparators[c],r=t.indexOf(h),!(r>=0));c++);if(0>r)break;if(a=t.substring(0,r),t=t.substring(r+h.length),a.length>0&&(a=n.createSearchChoice.call(this,a,s),a!==e&&null!==a&&n.id(a)!==e&&null!==n.id(a))){for(d=!1,c=0,l=s.length;l>c;c++)if(o(n.id(a),n.id(s[c]))){d=!0;break}d||i(a)}}return u!==t?t:void 0}function I(){var e=this;t.each(arguments,function(t,s){e[s].remove(),e[s]=null})}function P(e,s){var i=function(){};return i.prototype=new e,i.prototype.constructor=i,i.prototype.parent=e.prototype,i.prototype=t.extend(i.prototype,s),i}if(window.Select2===e){var _,O,j,A,D,M,R,F={x:0,y:0},L={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(t){switch(t=t.which?t.which:t){case L.LEFT:case L.RIGHT:case L.UP:case L.DOWN:return!0}return!1},isControl:function(t){var e=t.which;switch(e){case L.SHIFT:case L.CTRL:case L.ALT:return!0}return t.metaKey?!0:!1},isFunctionKey:function(t){return t=t.which?t.which:t,t>=112&&123>=t}},H="<div class='select2-measure-scrollbar'></div>",N={"\u24b6":"A","\uff21":"A","\xc0":"A","\xc1":"A","\xc2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\xc3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\xc4":"A","\u01de":"A","\u1ea2":"A","\xc5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\xc6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\xc7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\xc8":"E","\xc9":"E","\xca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\xcb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\xcc":"I","\xcd":"I","\xce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\xcf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\xd1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\xd2":"O","\xd3":"O","\xd4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\xd5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\xd6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\xd8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\xd9":"U","\xda":"U","\xdb":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\xdc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\xdd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\xe0":"a","\xe1":"a","\xe2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\xe3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\xe4":"a","\u01df":"a","\u1ea3":"a","\xe5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\xe6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\xe7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\xe8":"e","\xe9":"e","\xea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\xeb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\xec":"i","\xed":"i","\xee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\xef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\xf1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\xf2":"o","\xf3":"o","\xf4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\xf5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\xf6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\xf8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\xdf":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\xf9":"u","\xfa":"u","\xfb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\xfc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\xfd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\xff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z","\u0386":"\u0391","\u0388":"\u0395","\u0389":"\u0397","\u038a":"\u0399","\u03aa":"\u0399","\u038c":"\u039f","\u038e":"\u03a5","\u03ab":"\u03a5","\u038f":"\u03a9","\u03ac":"\u03b1","\u03ad":"\u03b5","\u03ae":"\u03b7","\u03af":"\u03b9","\u03ca":"\u03b9","\u0390":"\u03b9","\u03cc":"\u03bf","\u03cd":"\u03c5","\u03cb":"\u03c5","\u03b0":"\u03c5","\u03c9":"\u03c9","\u03c2":"\u03c3"};
M=t(document),A=function(){var t=1;return function(){return t++}}(),_=P(Object,{bind:function(t){var e=this;return function(){t.apply(e,arguments)}},init:function(s){var i,n,o=".select2-results";this.opts=s=this.prepareOpts(s),this.id=s.id,s.element.data("select2")!==e&&null!==s.element.data("select2")&&s.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=t(".select2-hidden-accessible"),0==this.liveRegion.length&&(this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)),this.containerId="s2id_"+(s.element.attr("id")||"autogen"+A()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",s.element.attr("title")),this.body=t(document.body),b(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",s.element.attr("style")),this.container.css(x(s.containerCss,this.opts.element)),this.container.addClass(x(s.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",m),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),b(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(x(s.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",m),this.results=i=this.container.find(o),this.search=n=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",m),h(this.results),this.dropdown.on("mousemove-filtered",o,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",o,this.bind(function(t){this._touchEvent=!0,this.highlightUnderEvent(t)})),this.dropdown.on("touchmove",o,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",o,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),d(80,this.results),this.dropdown.on("scroll-debounced",o,this.bind(this.loadMoreIfNeeded)),t(this.container).on("change",".select2-input",function(t){t.stopPropagation()}),t(this.dropdown).on("change",".select2-input",function(t){t.stopPropagation()}),t.fn.mousewheel&&i.mousewheel(function(t,e,s,n){var a=i.scrollTop();n>0&&0>=a-n?(i.scrollTop(0),m(t)):0>n&&i.get(0).scrollHeight-i.scrollTop()+n<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),m(t))}),l(n),n.on("keyup-change input paste",this.bind(this.updateResults)),n.on("focus",function(){n.addClass("select2-focused")}),n.on("blur",function(){n.removeClass("select2-focused")}),this.dropdown.on("mouseup",o,this.bind(function(e){t(e.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(e),this.selectHighlighted(e))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(t){t.stopPropagation()}),this.nextSearchTerm=e,t.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==s.maximumInputLength&&this.search.attr("maxlength",s.maximumInputLength);var r=s.element.prop("disabled");r===e&&(r=!1),this.enable(!r);var c=s.element.prop("readonly");c===e&&(c=!1),this.readonly(c),R=R||a(),this.autofocus=s.element.prop("autofocus"),s.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",s.searchInputPlaceholder)},destroy:function(){var t=this.opts.element,s=t.data("select2"),i=this;this.close(),t.length&&t[0].detachEvent&&i._sync&&t.each(function(){i._sync&&this.detachEvent("onpropertychange",i._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,s!==e&&(s.container.remove(),s.liveRegion.remove(),s.dropdown.remove(),t.show().removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?t.attr({tabindex:this.elementTabIndex}):t.removeAttr("tabindex"),t.show()),I.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(t){return t.is("option")?{id:t.prop("value"),text:t.text(),element:t.get(),css:t.attr("class"),disabled:t.prop("disabled"),locked:o(t.attr("locked"),"locked")||o(t.data("locked"),!0)}:t.is("optgroup")?{text:t.attr("label"),children:[],element:t.get(),css:t.attr("class")}:void 0},prepareOpts:function(s){var i,n,a,c,l=this;if(i=s.element,"select"===i.get(0).tagName.toLowerCase()&&(this.select=n=s.element),n&&t.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in s)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),s=t.extend({},{populateResults:function(i,n,a){var o,r=this.opts.id,c=this.liveRegion;(o=function(i,n,h){var u,d,p,f,m,g,v,b,C,w;i=s.sortResults(i,n,a);var S=[];for(u=0,d=i.length;d>u;u+=1)p=i[u],m=p.disabled===!0,f=!m&&r(p)!==e,g=p.children&&p.children.length>0,v=t("<li></li>"),v.addClass("select2-results-dept-"+h),v.addClass("select2-result"),v.addClass(f?"select2-result-selectable":"select2-result-unselectable"),m&&v.addClass("select2-disabled"),g&&v.addClass("select2-result-with-children"),v.addClass(l.opts.formatResultCssClass(p)),v.attr("role","presentation"),b=t(document.createElement("div")),b.addClass("select2-result-label"),b.attr("id","select2-result-label-"+A()),b.attr("role","option"),w=s.formatResult(p,b,a,l.opts.escapeMarkup),w!==e&&(b.html(w),v.append(b)),g&&(C=t("<ul></ul>"),C.addClass("select2-result-sub"),o(p.children,C,h+1),v.append(C)),v.data("select2-data",p),S.push(v[0]);n.append(S),c.text(s.formatMatches(i.length))})(n,i,0)}},t.fn.select2.defaults,s),"function"!=typeof s.id&&(a=s.id,s.id=function(t){return t[a]}),t.isArray(s.element.data("select2Tags"))){if("tags"in s)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+s.element.attr("id");s.tags=s.element.data("select2Tags")}if(n?(s.query=this.bind(function(t){var s,n,a,o={results:[],more:!1},r=t.term;a=function(e,s){var i;e.is("option")?t.matcher(r,e.text(),e)&&s.push(l.optionToData(e)):e.is("optgroup")&&(i=l.optionToData(e),e.children().each2(function(t,e){a(e,i.children)}),i.children.length>0&&s.push(i))},s=i.children(),this.getPlaceholder()!==e&&s.length>0&&(n=this.getPlaceholderOption(),n&&(s=s.not(n))),s.each2(function(t,e){a(e,o.results)}),t.callback(o)}),s.id=function(t){return t.id}):"query"in s||("ajax"in s?(c=s.element.data("ajax-url"),c&&c.length>0&&(s.ajax.url=c),s.query=S.call(s.element,s.ajax)):"data"in s?s.query=y(s.data):"tags"in s&&(s.query=$(s.tags),s.createSearchChoice===e&&(s.createSearchChoice=function(e){return{id:t.trim(e),text:t.trim(e)}}),s.initSelection===e&&(s.initSelection=function(e,i){var n=[];t(r(e.val(),s.separator,s.transformVal)).each(function(){var e={id:this,text:this},i=s.tags;t.isFunction(i)&&(i=i()),t(i).each(function(){return o(this.id,e.id)?(e=this,!1):void 0}),n.push(e)}),i(n)}))),"function"!=typeof s.query)throw"query function not defined for Select2 "+s.element.attr("id");if("top"===s.createSearchChoicePosition)s.createSearchChoicePosition=function(t,e){t.unshift(e)};else if("bottom"===s.createSearchChoicePosition)s.createSearchChoicePosition=function(t,e){t.push(e)};else if("function"!=typeof s.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return s},monitorSource:function(){var s,i=this.opts.element,n=this;i.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),this._sync=this.bind(function(){var t=i.prop("disabled");t===e&&(t=!1),this.enable(!t);var s=i.prop("readonly");s===e&&(s=!1),this.readonly(s),this.container&&(b(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(x(this.opts.containerCssClass,this.opts.element))),this.dropdown&&(b(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(x(this.opts.dropdownCssClass,this.opts.element)))}),i.length&&i[0].attachEvent&&i.each(function(){this.attachEvent("onpropertychange",n._sync)}),s=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,s!==e&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new s(function(e){t.each(e,n._sync)}),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(e){var s=t.Event("select2-selecting",{val:this.id(e),object:e,choice:e});return this.opts.element.trigger(s),!s.isDefaultPrevented()},triggerChange:function(e){e=e||{},e=t.extend({},e,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(e),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var t=this._enabled&&!this._readonly,e=!t;return t===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",e),this.close(),this.enabledInterface=t,!0)},enable:function(t){t===e&&(t=!0),this._enabled!==t&&(this._enabled=t,this.opts.element.prop("disabled",!t),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(t){t===e&&(t=!1),this._readonly!==t&&(this._readonly=t,this.opts.element.prop("readonly",t),this.enableInterface())},opened:function(){return this.container?this.container.hasClass("select2-dropdown-open"):!1},positionDropdown:function(){var e,s,i,n,a,o=this.dropdown,r=this.container,c=r.offset(),l=r.outerHeight(!1),h=r.outerWidth(!1),u=o.outerHeight(!1),d=t(window),p=d.width(),f=d.height(),m=d.scrollLeft()+p,g=d.scrollTop()+f,v=c.top+l,b=c.left,C=g>=v+u,w=c.top-u>=d.scrollTop(),S=o.outerWidth(!1),y=function(){return m>=b+S},$=function(){return c.left+m+r.outerWidth(!1)>S},T=o.hasClass("select2-drop-above");T?(s=!0,!w&&C&&(i=!0,s=!1)):(s=!1,!C&&w&&(i=!0,s=!0)),i&&(o.hide(),c=this.container.offset(),l=this.container.outerHeight(!1),h=this.container.outerWidth(!1),u=o.outerHeight(!1),m=d.scrollLeft()+p,g=d.scrollTop()+f,v=c.top+l,b=c.left,S=o.outerWidth(!1),o.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(a=t(".select2-results",o)[0],o.addClass("select2-drop-auto-width"),o.css("width",""),S=o.outerWidth(!1)+(a.scrollHeight===a.clientHeight?0:R.width),S>h?h=S:S=h,u=o.outerHeight(!1)):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(e=this.body.offset(),v-=e.top,b-=e.left),!y()&&$()&&(b=c.left+this.container.outerWidth(!1)-S),n={left:b,width:h},s?(n.top=c.top-u,n.bottom="auto",this.container.addClass("select2-drop-above"),o.addClass("select2-drop-above")):(n.top=v,n.bottom="auto",this.container.removeClass("select2-drop-above"),o.removeClass("select2-drop-above")),n=t.extend(n,x(this.opts.dropdownCss,this.opts.element)),o.css(n)},shouldOpen:function(){var e;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(e=t.Event("select2-opening"),this.opts.element.trigger(e),!e.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),M.on("mousemove.select2Event",function(t){F.x=t.pageX,F.y=t.pageY}),!0):!1},opening:function(){var e,i=this.containerEventName,n="scroll."+i,a="resize."+i,o="orientationchange."+i;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),e=t("#select2-drop-mask"),0===e.length&&(e=t(document.createElement("div")),e.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),e.hide(),e.appendTo(this.body),e.on("mousedown touchstart click",function(i){s(e);var n,a=t("#select2-drop");a.length>0&&(n=a.data("select2"),n.opts.selectOnBlur&&n.selectHighlighted({noFocus:!0}),n.close(),i.preventDefault(),i.stopPropagation())})),this.dropdown.prev()[0]!==e[0]&&this.dropdown.before(e),t("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),e.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var r=this;this.container.parents().add(window).each(function(){t(this).on(a+" "+n+" "+o,function(){r.opened()&&r.positionDropdown()})})},close:function(){if(this.opened()){var e=this.containerEventName,s="scroll."+e,i="resize."+e,n="orientationchange."+e;this.container.parents().add(window).each(function(){t(this).off(s).off(i).off(n)}),this.clearDropdownAlignmentPreference(),t("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),M.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(t.Event("select2-close"))}},externalSearch:function(t){this.open(),this.search.val(t),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return x(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var e,s,i,n,a,o,r,c,l=this.results;if(s=this.highlight(),!(0>s)){if(0==s)return void l.scrollTop(0);e=this.findHighlightableChoices().find(".select2-result-label"),i=t(e[s]),c=(i.offset()||{}).top||0,n=c+i.outerHeight(!0),s===e.length-1&&(r=l.find("li.select2-more-results"),r.length>0&&(n=r.offset().top+r.outerHeight(!0))),a=l.offset().top+l.outerHeight(!1),n>a&&l.scrollTop(l.scrollTop()+(n-a)),o=c-l.offset().top,0>o&&"none"!=i.css("display")&&l.scrollTop(l.scrollTop()+o)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(e){for(var s=this.findHighlightableChoices(),i=this.highlight();i>-1&&i<s.length;){i+=e;var n=t(s[i]);if(n.hasClass("select2-result-selectable")&&!n.hasClass("select2-disabled")&&!n.hasClass("select2-selected")){this.highlight(i);break}}},highlight:function(e){var s,i,a=this.findHighlightableChoices();return 0===arguments.length?n(a.filter(".select2-highlighted")[0],a.get()):(e>=a.length&&(e=a.length-1),0>e&&(e=0),this.removeHighlight(),s=t(a[e]),s.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",s.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(s.text()),i=s.data("select2-data"),void(i&&this.opts.element.trigger({type:"select2-highlight",val:this.id(i),choice:i})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(e){var s=t(e.target).closest(".select2-result-selectable");if(s.length>0&&!s.is(".select2-highlighted")){var i=this.findHighlightableChoices();this.highlight(i.index(s))}else 0==s.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var t,e=this.results,s=e.find("li.select2-more-results"),i=this.resultsPage+1,n=this,a=this.search.val(),o=this.context;0!==s.length&&(t=s.offset().top-e.offset().top-e.height(),t<=this.opts.loadMorePadding&&(s.addClass("select2-active"),this.opts.query({element:this.opts.element,term:a,page:i,context:o,matcher:this.opts.matcher,callback:this.bind(function(t){n.opened()&&(n.opts.populateResults.call(this,e,t.results,{term:a,page:i,context:o}),n.postprocessResults(t,!1,!1),t.more===!0?(s.detach().appendTo(e).html(n.opts.escapeMarkup(x(n.opts.formatLoadMore,n.opts.element,i+1))),window.setTimeout(function(){n.loadMoreIfNeeded()},10)):s.remove(),n.positionDropdown(),n.resultsPage=i,n.context=t.context,this.opts.element.trigger({type:"select2-loaded",items:t}))})})))},tokenize:function(){},updateResults:function(s){function i(){l.removeClass("select2-active"),d.positionDropdown(),d.liveRegion.text(h.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?h.text():d.opts.formatMatches(h.find('.select2-result-selectable:not(".select2-selected")').length))}function n(t){h.html(t),i()}var a,r,c,l=this.search,h=this.results,u=this.opts,d=this,p=l.val(),f=t.data(this.container,"select2-last-term");if((s===!0||!f||!o(p,f))&&(t.data(this.container,"select2-last-term",p),s===!0||this.showSearchInput!==!1&&this.opened())){c=++this.queryCount;var m=this.getMaximumSelectionSize();if(m>=1&&(a=this.data(),t.isArray(a)&&a.length>=m&&T(u.formatSelectionTooBig,"formatSelectionTooBig")))return void n("<li class='select2-selection-limit'>"+x(u.formatSelectionTooBig,u.element,m)+"</li>");if(l.val().length<u.minimumInputLength)return n(T(u.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+x(u.formatInputTooShort,u.element,l.val(),u.minimumInputLength)+"</li>":""),void(s&&this.showSearch&&this.showSearch(!0));if(u.maximumInputLength&&l.val().length>u.maximumInputLength)return void n(T(u.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+x(u.formatInputTooLong,u.element,l.val(),u.maximumInputLength)+"</li>":"");u.formatSearching&&0===this.findHighlightableChoices().length&&n("<li class='select2-searching'>"+x(u.formatSearching,u.element)+"</li>"),l.addClass("select2-active"),this.removeHighlight(),r=this.tokenize(),r!=e&&null!=r&&l.val(r),this.resultsPage=1,u.query({element:u.element,term:l.val(),page:this.resultsPage,context:null,matcher:u.matcher,callback:this.bind(function(a){var r;if(c==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(a.hasError!==e&&T(u.formatAjaxError,"formatAjaxError"))return void n("<li class='select2-ajax-error'>"+x(u.formatAjaxError,u.element,a.jqXHR,a.textStatus,a.errorThrown)+"</li>");if(this.context=a.context===e?null:a.context,this.opts.createSearchChoice&&""!==l.val()&&(r=this.opts.createSearchChoice.call(d,l.val(),a.results),r!==e&&null!==r&&d.id(r)!==e&&null!==d.id(r)&&0===t(a.results).filter(function(){return o(d.id(this),d.id(r))}).length&&this.opts.createSearchChoicePosition(a.results,r)),0===a.results.length&&T(u.formatNoMatches,"formatNoMatches"))return void n("<li class='select2-no-results'>"+x(u.formatNoMatches,u.element,l.val())+"</li>");h.empty(),d.opts.populateResults.call(this,h,a.results,{term:l.val(),page:this.resultsPage,context:null}),a.more===!0&&T(u.formatLoadMore,"formatLoadMore")&&(h.append("<li class='select2-more-results'>"+u.escapeMarkup(x(u.formatLoadMore,u.element,this.resultsPage))+"</li>"),window.setTimeout(function(){d.loadMoreIfNeeded()},10)),this.postprocessResults(a,s),i(),this.opts.element.trigger({type:"select2-loaded",items:a})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){p(this.search)},selectHighlighted:function(t){if(this._touchMoved)return void this.clearTouchMoved();var e=this.highlight(),s=this.results.find(".select2-highlighted"),i=s.closest(".select2-result").data("select2-data");i?(this.highlight(e),this.onSelect(i,t)):t&&t.noFocus&&this.close()},getPlaceholder:function(){var t;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((t=this.getPlaceholderOption())!==e?t.text():e)},getPlaceholderOption:function(){if(this.select){var s=this.select.children("option").first();if(this.opts.placeholderOption!==e)return"first"===this.opts.placeholderOption&&s||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===t.trim(s.text())&&""===s.val())return s}},initContainerWidth:function(){function s(){var s,i,n,a,o,r;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(s=this.opts.element.attr("style"),s!==e)for(i=s.split(";"),a=0,o=i.length;o>a;a+=1)if(r=i[a].replace(/\s/g,""),n=r.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==n&&n.length>=1)return n[1];return"resolve"===this.opts.width?(s=this.opts.element.css("width"),s.indexOf("%")>0?s:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return t.isFunction(this.opts.width)?this.opts.width():this.opts.width}var i=s.call(this);null!==i&&this.container.css("width",i)}}),O=P(_,{createContainer:function(){var e=t(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return e},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var s,i,n;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),s=this.search.get(0),s.createTextRange?(i=s.createTextRange(),i.collapse(!1),i.select()):s.setSelectionRange&&(n=this.search.val().length,s.setSelectionRange(n,n))),""===this.search.val()&&this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){t("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),I.call(this,"selection","focusser")},initContainer:function(){var e,i,n=this.container,a=this.dropdown,o=A();this.showSearch(this.opts.minimumResultsForSearch<0?!1:!0),this.selection=e=n.find(".select2-choice"),this.focusser=n.find(".select2-focusser"),e.find(".select2-chosen").attr("id","select2-chosen-"+o),this.focusser.attr("aria-labelledby","select2-chosen-"+o),this.results.attr("id","select2-results-"+o),this.search.attr("aria-owns","select2-results-"+o),this.focusser.attr("id","s2id_autogen"+o),i=t("label[for='"+this.opts.element.attr("id")+"']"),this.opts.element.focus(this.bind(function(){this.focus()})),this.focusser.prev().text(i.text()).attr("for",this.focusser.attr("id"));var r=this.opts.element.attr("title");this.opts.element.attr("title",r||i.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(t("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()&&229!=t.keyCode){if(t.which===L.PAGE_UP||t.which===L.PAGE_DOWN)return void m(t);switch(t.which){case L.UP:case L.DOWN:return this.moveHighlight(t.which===L.UP?-1:1),void m(t);case L.ENTER:return this.selectHighlighted(),void m(t);case L.TAB:return void this.selectHighlighted({noFocus:!0});case L.ESC:return this.cancel(t),void m(t)}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()&&t.which!==L.TAB&&!L.isControl(t)&&!L.isFunctionKey(t)&&t.which!==L.ESC){if(this.opts.openOnEnter===!1&&t.which===L.ENTER)return void m(t);if(t.which==L.DOWN||t.which==L.UP||t.which==L.ENTER&&this.opts.openOnEnter){if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return;return this.open(),void m(t)}return t.which==L.DELETE||t.which==L.BACKSPACE?(this.opts.allowClear&&this.clear(),void m(t)):void 0}})),l(this.focusser),this.focusser.on("keyup-change input",this.bind(function(t){if(this.opts.minimumResultsForSearch>=0){if(t.stopPropagation(),this.opened())return;this.open()}})),e.on("mousedown touchstart","abbr",this.bind(function(t){this.isInterfaceEnabled()&&(this.clear(),g(t),this.close(),this.selection&&this.selection.focus())})),e.on("mousedown touchstart",this.bind(function(i){s(e),this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),m(i)})),a.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),e.on("focus",this.bind(function(t){m(t)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(t.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.hide(),this.setPlaceholder()},clear:function(e){var s=this.selection.data("select2-data");if(s){var i=t.Event("select2-clearing");if(this.opts.element.trigger(i),i.isDefaultPrevented())return;var n=this.getPlaceholderOption();this.opts.element.val(n?n.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),e!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(s),choice:s}),this.triggerChange({removed:s}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var t=this;this.opts.initSelection.call(null,this.opts.element,function(s){s!==e&&null!==s&&(t.updateSelection(s),t.close(),t.setPlaceholder(),t.nextSearchTerm=t.opts.nextSearchTerm(s,t.search.val()))})}},isPlaceholderOptionSelected:function(){var t;return this.getPlaceholder()===e?!1:(t=this.getPlaceholderOption())!==e&&t.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===e||null===this.opts.element.val()},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),s=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var i=t.find("option").filter(function(){return this.selected&&!this.disabled});e(s.optionToData(i))}:"data"in e&&(e.initSelection=e.initSelection||function(s,i){var n=s.val(),a=null;e.query({matcher:function(t,s,i){var r=o(n,e.id(i));return r&&(a=i),r},callback:t.isFunction(i)?function(){i(a)}:t.noop})}),e},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===e?e:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var t=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&t!==e){if(this.select&&this.getPlaceholderOption()===e)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(t)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(t,e,s){var i=0,n=this;if(this.findHighlightableChoices().each2(function(t,e){return o(n.id(e.data("select2-data")),n.opts.element.val())?(i=t,!1):void 0}),s!==!1&&this.highlight(e===!0&&i>=0?i:0),e===!0){var a=this.opts.minimumResultsForSearch;a>=0&&this.showSearch(E(t.results)>=a)}},showSearch:function(e){this.showSearchInput!==e&&(this.showSearchInput=e,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!e),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!e),t(this.dropdown,this.container).toggleClass("select2-with-searchbox",e))},onSelect:function(t,e){if(this.triggerSelect(t)){var s=this.opts.element.val(),i=this.data();this.opts.element.val(this.id(t)),this.updateSelection(t),this.opts.element.trigger({type:"select2-selected",val:this.id(t),choice:t}),this.nextSearchTerm=this.opts.nextSearchTerm(t,this.search.val()),this.close(),e&&e.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),o(s,this.id(t))||this.triggerChange({added:t,removed:i})}},updateSelection:function(t){var s,i,n=this.selection.find(".select2-chosen");this.selection.data("select2-data",t),n.empty(),null!==t&&(s=this.opts.formatSelection(t,n,this.opts.escapeMarkup)),s!==e&&n.append(s),i=this.opts.formatSelectionCssClass(t,n),i!==e&&n.addClass(i),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==e&&this.container.addClass("select2-allowclear")},val:function(){var t,s=!1,i=null,n=this,a=this.data();if(0===arguments.length)return this.opts.element.val();if(t=arguments[0],arguments.length>1&&(s=arguments[1]),this.select)this.select.val(t).find("option").filter(function(){return this.selected}).each2(function(t,e){return i=n.optionToData(e),!1}),this.updateSelection(i),this.setPlaceholder(),s&&this.triggerChange({added:i,removed:a});else{if(!t&&0!==t)return void this.clear(s);if(this.opts.initSelection===e)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(t),this.opts.initSelection(this.opts.element,function(t){n.opts.element.val(t?n.id(t):""),n.updateSelection(t),n.setPlaceholder(),s&&n.triggerChange({added:t,removed:a})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(t){var s,i=!1;return 0===arguments.length?(s=this.selection.data("select2-data"),s==e&&(s=null),s):(arguments.length>1&&(i=arguments[1]),void(t?(s=this.data(),this.opts.element.val(t?this.id(t):""),this.updateSelection(t),i&&this.triggerChange({added:t,removed:s})):this.clear(i)))}}),j=P(_,{createContainer:function(){var e=t(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return e},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),s=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var i=[];t.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(t,e){i.push(s.optionToData(e))}),e(i)}:"data"in e&&(e.initSelection=e.initSelection||function(s,i){var n=r(s.val(),e.separator,e.transformVal),a=[];e.query({matcher:function(s,i,r){var c=t.grep(n,function(t){return o(t,e.id(r))}).length;return c&&a.push(r),c},callback:t.isFunction(i)?function(){for(var t=[],s=0;s<n.length;s++)for(var r=n[s],c=0;c<a.length;c++){var l=a[c];if(o(r,e.id(l))){t.push(l),a.splice(c,1);
break}}i(t)}:t.noop})}),e},selectChoice:function(t){var e=this.container.find(".select2-search-choice-focus");e.length&&t&&t[0]==e[0]||(e.length&&this.opts.element.trigger("choice-deselected",e),e.removeClass("select2-search-choice-focus"),t&&t.length&&(this.close(),t.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",t)))},destroy:function(){t("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),I.call(this,"searchContainer","selection")},initContainer:function(){var e,s=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=e=this.container.find(s);var i=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(){i.search[0].focus(),i.selectChoice(t(this))}),this.search.attr("id","s2id_autogen"+A()),this.search.prev().text(t("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.opts.element.focus(this.bind(function(){this.focus()})),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()){++this.keydowns;var s=e.find(".select2-search-choice-focus"),i=s.prev(".select2-search-choice:not(.select2-locked)"),n=s.next(".select2-search-choice:not(.select2-locked)"),a=f(this.search);if(s.length&&(t.which==L.LEFT||t.which==L.RIGHT||t.which==L.BACKSPACE||t.which==L.DELETE||t.which==L.ENTER)){var o=s;return t.which==L.LEFT&&i.length?o=i:t.which==L.RIGHT?o=n.length?n:null:t.which===L.BACKSPACE?this.unselect(s.first())&&(this.search.width(10),o=i.length?i:n):t.which==L.DELETE?this.unselect(s.first())&&(this.search.width(10),o=n.length?n:null):t.which==L.ENTER&&(o=null),this.selectChoice(o),m(t),void(o&&o.length||this.open())}if((t.which===L.BACKSPACE&&1==this.keydowns||t.which==L.LEFT)&&0==a.offset&&!a.length)return this.selectChoice(e.find(".select2-search-choice:not(.select2-locked)").last()),void m(t);if(this.selectChoice(null),this.opened())switch(t.which){case L.UP:case L.DOWN:return this.moveHighlight(t.which===L.UP?-1:1),void m(t);case L.ENTER:return this.selectHighlighted(),void m(t);case L.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case L.ESC:return this.cancel(t),void m(t)}if(t.which!==L.TAB&&!L.isControl(t)&&!L.isFunctionKey(t)&&t.which!==L.BACKSPACE&&t.which!==L.ESC){if(t.which===L.ENTER){if(this.opts.openOnEnter===!1)return;if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return}this.open(),(t.which===L.PAGE_UP||t.which===L.PAGE_DOWN)&&m(t),t.which===L.ENTER&&m(t)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),e.stopImmediatePropagation(),this.opts.element.trigger(t.Event("select2-blur"))})),this.container.on("click",s,this.bind(function(e){this.isInterfaceEnabled()&&(t(e.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.open(),this.focusSearch(),e.preventDefault()))})),this.container.on("focus",s,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.hide(),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var t=this;this.opts.initSelection.call(null,this.opts.element,function(s){s!==e&&null!==s&&(t.updateSelection(s),t.close(),t.clearSearch())})}},clearSearch:function(){var t=this.getPlaceholder(),s=this.getMaxSearchWidth();t!==e&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(t).addClass("select2-default"),this.search.width(s>0?s:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(e){var s=[],i=[],a=this;t(e).each(function(){n(a.id(this),s)<0&&(s.push(a.id(this)),i.push(this))}),e=i,this.selection.find(".select2-search-choice").remove(),t(e).each(function(){a.addSelectedChoice(this)}),a.postprocessResults()},tokenize:function(){var t=this.search.val();t=this.opts.tokenizer.call(this,t,this.data(),this.bind(this.onSelect),this.opts),null!=t&&t!=e&&(this.search.val(t),t.length>0&&this.open())},onSelect:function(t,s){this.triggerSelect(t)&&""!==t.text&&(this.addSelectedChoice(t),this.opts.element.trigger({type:"selected",val:this.id(t),choice:t}),this.nextSearchTerm=this.opts.nextSearchTerm(t,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(t,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:t}),s&&s.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(s){var i,n,a=!s.locked,o=t("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),r=t("<li class='select2-search-choice select2-locked'><div></div></li>"),c=a?o:r,l=this.id(s),h=this.getVal();i=this.opts.formatSelection(s,c.find("div"),this.opts.escapeMarkup),i!=e&&c.find("div").replaceWith(t("<div></div>").html(i)),n=this.opts.formatSelectionCssClass(s,c.find("div")),n!=e&&c.addClass(n),a&&c.find(".select2-search-choice-close").on("mousedown",m).on("click dblclick",this.bind(function(e){this.isInterfaceEnabled()&&(this.unselect(t(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),m(e),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),c.data("select2-data",s),c.insertBefore(this.searchContainer),h.push(l),this.setVal(h)},unselect:function(e){var s,i,a=this.getVal();if(e=e.closest(".select2-search-choice"),0===e.length)throw"Invalid argument: "+e+". Must be .select2-search-choice";if(s=e.data("select2-data")){var o=t.Event("select2-removing");if(o.val=this.id(s),o.choice=s,this.opts.element.trigger(o),o.isDefaultPrevented())return!1;for(;(i=n(this.id(s),a))>=0;)a.splice(i,1),this.setVal(a),this.select&&this.postprocessResults();return e.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(s),choice:s}),this.triggerChange({removed:s}),!0}},postprocessResults:function(t,e,s){var i=this.getVal(),a=this.results.find(".select2-result"),o=this.results.find(".select2-result-with-children"),r=this;a.each2(function(t,e){var s=r.id(e.data("select2-data"));n(s,i)>=0&&(e.addClass("select2-selected"),e.find(".select2-result-selectable").addClass("select2-selected"))}),o.each2(function(t,e){e.is(".select2-result-selectable")||0!==e.find(".select2-result-selectable:not(.select2-selected)").length||e.addClass("select2-selected")}),-1==this.highlight()&&s!==!1&&this.opts.closeOnSelect===!0&&r.highlight(0),!this.opts.createSearchChoice&&!a.filter(".select2-result:not(.select2-selected)").length>0&&(!t||t&&!t.more&&0===this.results.find(".select2-no-results").length)&&T(r.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+x(r.opts.formatNoMatches,r.opts.element,r.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-c(this.search)},resizeSearch:function(){var t,e,s,i,n,a=c(this.search);t=v(this.search)+10,e=this.search.offset().left,s=this.selection.width(),i=this.selection.offset().left,n=s-(e-i)-a,t>n&&(n=s-a),40>n&&(n=s-a),0>=n&&(n=t),this.search.width(Math.floor(n))},getVal:function(){var t;return this.select?(t=this.select.val(),null===t?[]:t):(t=this.opts.element.val(),r(t,this.opts.separator,this.opts.transformVal))},setVal:function(e){var s;this.select?this.select.val(e):(s=[],t(e).each(function(){n(this,s)<0&&s.push(this)}),this.opts.element.val(0===s.length?"":s.join(this.opts.separator)))},buildChangeDetails:function(t,e){for(var e=e.slice(0),t=t.slice(0),s=0;s<e.length;s++)for(var i=0;i<t.length;i++)o(this.opts.id(e[s]),this.opts.id(t[i]))&&(e.splice(s,1),s>0&&s--,t.splice(i,1),i--);return{added:e,removed:t}},val:function(s,i){var n,a=this;if(0===arguments.length)return this.getVal();if(n=this.data(),n.length||(n=[]),!s&&0!==s)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(i&&this.triggerChange({added:this.data(),removed:n}));if(this.setVal(s),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange(this.buildChangeDetails(n,this.data()));else{if(this.opts.initSelection===e)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(e){var s=t.map(e,a.id);a.setVal(s),a.updateSelection(e),a.clearSearch(),i&&a.triggerChange(a.buildChangeDetails(n,a.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var e=[],s=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){e.push(s.opts.id(t(this).data("select2-data")))}),this.setVal(e),this.triggerChange()},data:function(e,s){var i,n,a=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return t(this).data("select2-data")}).get():(n=this.data(),e||(e=[]),i=t.map(e,function(t){return a.opts.id(t)}),this.setVal(i),this.updateSelection(e),this.clearSearch(),s&&this.triggerChange(this.buildChangeDetails(n,this.data())),void 0)}}),t.fn.select2=function(){var s,i,a,o,r,c=Array.prototype.slice.call(arguments,0),l=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],h=["opened","isFocused","container","dropdown"],u=["val","data"],d={search:"externalSearch"};return this.each(function(){if(0===c.length||"object"==typeof c[0])s=0===c.length?{}:t.extend({},c[0]),s.element=t(this),"select"===s.element.get(0).tagName.toLowerCase()?r=s.element.prop("multiple"):(r=s.multiple||!1,"tags"in s&&(s.multiple=r=!0)),i=r?new window.Select2["class"].multi:new window.Select2["class"].single,i.init(s);else{if("string"!=typeof c[0])throw"Invalid arguments to select2 plugin: "+c;if(n(c[0],l)<0)throw"Unknown method: "+c[0];if(o=e,i=t(this).data("select2"),i===e)return;if(a=c[0],"container"===a?o=i.container:"dropdown"===a?o=i.dropdown:(d[a]&&(a=d[a]),o=i[a].apply(i,c.slice(1))),n(c[0],h)>=0||n(c[0],u)>=0&&1==c.length)return!1}}),o===e?this:o},t.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(t,e,s,i){var n=[];return C(this.text(t),s.term,n,i),n.join("")},transformVal:function(e){return t.trim(e)},formatSelection:function(t,s,i){return t?i(this.text(t)):e},sortResults:function(t){return t},formatResultCssClass:function(t){return t.css},formatSelectionCssClass:function(){return e},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(t){return t==e?null:t.id},text:function(e){return e&&this.data&&this.data.text?t.isFunction(this.data.text)?this.data.text(e):e[this.data.text]:e.text},matcher:function(t,e){return i(""+e).toUpperCase().indexOf(i(""+t).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:k,escapeMarkup:w,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(t){return t},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return e},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(t){var e="ontouchstart"in window||navigator.msMaxTouchPoints>0;return e&&t.opts.minimumResultsForSearch<0?!1:!0}},t.fn.select2.locales=[],t.fn.select2.locales.en={formatMatches:function(t){return 1===t?"One result is available, press enter to select it.":t+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(){return"Loading failed"},formatInputTooShort:function(t,e){var s=e-t.length;return"Please enter "+s+" or more character"+(1==s?"":"s")},formatInputTooLong:function(t,e){var s=t.length-e;return"Please delete "+s+" character"+(1==s?"":"s")},formatSelectionTooBig:function(t){return"You can only select "+t+" item"+(1==t?"":"s")},formatLoadMore:function(){return"Loading more results\u2026"},formatSearching:function(){return"Searching\u2026"}},t.extend(t.fn.select2.defaults,t.fn.select2.locales.en),t.fn.select2.ajaxDefaults={transport:t.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:S,local:y,tags:$},util:{debounce:u,markMatch:C,escapeMarkup:w,stripDiacritics:i},"class":{"abstract":_,single:O,multi:j}}}}(jQuery);